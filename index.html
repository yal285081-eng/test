<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mr. Thayer's Class ğŸ“</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@500&family=Permanent+Marker&family=Tajawal:wght@500;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <script type="importmap">
      {
        "imports": {
          "@google/generative-ai": "https://esm.run/@google/generative-ai"
        }
      }
    </script>

    <style>
        body { background-color: #2c3e50; color: white; font-family: 'Tajawal', sans-serif; margin: 0; text-align: center; overflow-x: hidden; padding-bottom: 90px; user-select: none; -webkit-tap-highlight-color: transparent; }
        
        header { background: #e74c3c; padding: 20px; box-shadow: 0 4px 0 #c0392b; transform: rotate(-1deg); margin-bottom: 30px; position: relative; z-index: 10; }
        header h1 { margin: 0; font-family: 'Permanent Marker', cursive; font-size: 2.2rem; letter-spacing: 1px; }
        header p { margin: 5px 0 0; font-weight: bold; }

        .profile-container { position: relative; display: inline-block; margin-top: 10px; transition: transform 0.3s; cursor: pointer; z-index: 20; }
        .profile-img { width: 170px; height: 170px; object-fit: cover; border-radius: 50%; border: 5px solid white; box-shadow: 0 10px 20px rgba(0,0,0,0.3); background: #fff; }
        .badge { position: absolute; bottom: 5px; right: -5px; background: #f1c40f; color: #333; padding: 5px 12px; border-radius: 15px; font-weight: bold; transform: rotate(-10deg); border: 2px solid white; }

        /* ØªØ¹Ø¯ÙŠÙ„ Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ø¬ÙˆØ§Ù†Ø¨ */
        .side-emoji { position: absolute; top: 50%; transform: translateY(-50%); font-size: 2.5rem; cursor: pointer; z-index: 25; transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); filter: drop-shadow(0 5px 5px rgba(0,0,0,0.3)); text-decoration: none; }
        .emoji-left { left: -60px; }
        .emoji-right { right: -60px; color: #FF0000; } /* Ù„ÙˆÙ† Ø§Ù„ÙŠÙˆØªÙŠÙˆØ¨ */
        .side-emoji:hover { transform: translateY(-50%) scale(1.2); }

        .btn-wrapper { position: relative; width: 90%; max-width: 400px; margin: 30px auto 15px; display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 10px; }
        .action-btn { background: linear-gradient(to bottom, #3498db, #2980b9); color: white; border: none; padding: 20px 10px; font-size: 1rem; border-radius: 15px; cursor: pointer; box-shadow: 0 4px 10px rgba(52, 152, 219, 0.4); font-family: 'Tajawal', sans-serif; height: 100px; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: 0.2s; }
        .action-btn:active { transform: scale(0.95); }

        /* Ø²Ø± Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
        .quiz-center-btn { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90px; height: 90px; border-radius: 50%; background: radial-gradient(circle, #f1c40f, #f39c12); border: 5px solid #2c3e50; color: #2c3e50; font-weight: 800; font-size: 1rem; cursor: pointer; z-index: 10; display: flex; align-items: center; justify-content: center; text-align: center; animation: pulseBtn 2s infinite; }
        @keyframes pulseBtn { 0% { transform: translate(-50%, -50%) scale(1); } 70% { transform: translate(-50%, -50%) scale(1.05); } 100% { transform: translate(-50%, -50%) scale(1); } }

        /* Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª (Ø§Ù„Ù…ÙˆØ¯Ø§Ù„) */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.85); z-index: 2000; justify-content: center; align-items: center; backdrop-filter: blur(5px); }
        .secret-box { background: white; color: #333; width: 85%; max-width: 350px; padding: 40px 20px; border-radius: 25px; text-align: center; position: relative; box-shadow: 0 0 30px rgba(255, 255, 255, 0.2); animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); border: 5px solid #f1c40f; }
        @keyframes popIn { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        .close-icon { position: absolute; top: 15px; right: 20px; font-size: 1.5rem; cursor: pointer; color: #e74c3c; font-weight: bold; }
        .modal-text { font-size: 1.4rem; font-weight: 800; color: #2c3e50; margin: 0; }

        /* Ø´Ø§Øª Ø¨ÙˆØª Ø³ØªØ§ÙŠÙ„ */
        #chat-icon { position: fixed; bottom: 70px; right: 20px; width: 60px; height: 60px; background: #3498db; border-radius: 50%; display: flex; align-items: center; justify-content: center; z-index: 10002; font-size: 30px; cursor: pointer; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        #chat-window { display: none; position: fixed; bottom: 140px; right: 20px; width: 320px; height: 450px; background: #fff; border-radius: 20px; z-index: 10003; flex-direction: column; overflow: hidden; border: 3px solid #3498db; box-shadow: 0 5px 30px rgba(0,0,0,0.4); }
        .chat-header { background: #3498db; color: white; padding: 15px; display: flex; justify-content: space-between; }
        .chat-body { flex: 1; padding: 15px; overflow-y: auto; background: #f1f2f6; display: flex; flex-direction: column; gap: 10px; }
        .chat-input-area { padding: 10px; display: flex; gap: 5px; background: white; }
        #chatInput { flex: 1; padding: 10px; border-radius: 20px; border: 1px solid #ddd; outline: none; }
        .msg { max-width: 80%; padding: 10px 15px; border-radius: 15px; font-size: 0.9rem; }
        .msg-user { background: #3498db; color: white; align-self: flex-end; }
        .msg-bot { background: #ecf0f1; color: #2c3e50; align-self: flex-start; border: 1px solid #bdc3c7; }
    </style>
</head>
<body>

    <div id="chat-icon" onclick="toggleChat()">ğŸ’¬</div>
    <div id="chat-window">
        <div class="chat-header"><span onclick="toggleChat()" style="cursor:pointer">âœ–</span><span>Thaer Bot (AI) ğŸ§ </span></div>
        <div class="chat-body" id="chatBody"><div class="msg msg-bot">Ù‡Ù„Ø§ Ø¨Ùƒ! Ø´Ù„ÙˆÙ† Ø£Ù‚Ø¯Ø± Ø£Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„ÙŠÙˆÙ…ØŸ ğŸ˜</div></div>
        <div class="chat-input-area">
            <button onclick="sendMessage()" style="border:none; background:none; cursor:pointer">â¤</button>
            <input type="text" id="chatInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ..." onkeypress="if(event.key==='Enter') sendMessage()">
        </div>
    </div>

    <header>
        <h1>Mr.Thaer ğŸ‡®ğŸ‡¶</h1>
        <p>The King of English / Ù…Ù„Ùƒ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</p>
    </header>

    <div class="profile-container">
        <div class="side-emoji emoji-left" onclick="alert('Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø£Ø³ØªØ§Ø°...')">ğŸ“</div>
        <a href="https://youtube.com/@mrthaer-yo9zn" target="_blank" class="side-emoji emoji-right">ğŸ¬</a>
        <img src="img1.jpg" alt="Mr. Thayer" class="profile-img">
        <div class="badge">Top Teacher</div>
    </div>

    <div class="btn-wrapper">
        <button class="action-btn" onclick="openModal('homeworkModal')">ğŸ“š<br>Ø§Ù„ÙˆØ§Ø¬Ø¨</button>
        <button class="action-btn" onclick="window.open('https://translate.google.com')">ğŸŒ<br>Ø§Ù„Ù…ØªØ±Ø¬Ù…</button>
        <button class="quiz-center-btn" onclick="openModal('quizModal')">Ø§Ø®ØªØ¨Ø§Ø±</button>
        <button class="action-btn" onclick="alert('ØªÙˆÙ‚Ø¹Ø§ØªÙƒ: Ø±Ø§Ø­ ØªØ¬ÙŠØ¨ 100! ğŸ”¥')">ğŸ”®<br>ØªÙˆÙ‚Ø¹ Ù†ØªÙŠØ¬ØªÙƒ</button>
        <button class="action-btn" onclick="alert('Ù…Ø­Ø§ÙˆÙ„Ø© ÙØ§Ø´Ù„Ø©! Ø§Ù„Ø£Ø³ØªØ§Ø° ÙƒØ´ÙÙƒ ğŸ˜‚')">âš ï¸<br>Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</button>
    </div>

    <div id="homeworkModal" class="modal-overlay">
        <div class="secret-box">
            <span class="close-icon" onclick="closeModal('homeworkModal')">âœ–</span>
            <p class="modal-text">Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØ§Ø¬Ø¨ Ø­Ø§Ù„ÙŠØ§Ù‹ ğŸŒŸ</p>
        </div>
    </div>

    <div id="quizModal" class="modal-overlay">
        <div class="secret-box" style="border-color: #e67e22;">
            <span class="close-icon" onclick="closeModal('quizModal')">âœ–</span>
            <p class="modal-text">Ù„Ø§ ÙŠØªÙˆÙØ± Ø§Ø®ØªØ¨Ø§Ø± Ø­Ø§Ù„ÙŠØ§Ù‹ ğŸ“–</p>
        </div>
    </div>

    <script type="module">
        import { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";

        // Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
        const API_KEY = "Ø¶Ø¹_Ù…ÙØªØ§Ø­Ùƒ_Ù‡Ù†Ø§"; 
        const genAI = new GoogleGenerativeAI(API_KEY);

        window.toggleChat = function() {
            const win = document.getElementById('chat-window');
            win.style.display = (win.style.display === 'flex') ? 'none' : 'flex';
        };

        window.sendMessage = async function() {
            const input = document.getElementById('chatInput');
            const msg = input.value.trim();
            if (!msg) return;
            addMsg(msg, 'user');
            input.value = '';
            try {
                const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });
                const result = await model.generateContent(msg);
                addMsg(result.response.text(), 'bot');
            } catch (e) { addMsg("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„!", 'bot'); }
        };

        function addMsg(text, type) {
            const div = document.createElement('div');
            div.className = 'msg ' + (type === 'user' ? 'msg-user' : 'msg-bot');
            div.innerText = text;
            document.getElementById('chatBody').appendChild(div);
            document.getElementById('chatBody').scrollTop = document.getElementById('chatBody').scrollHeight;
        }

        // Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
        window.openModal = function(id) {
            document.getElementById(id).style.display = 'flex';
            if(id === 'homeworkModal') confetti();
        };

        window.closeModal = function(id) {
            document.getElementById(id).style.display = 'none';
        };
    </script>
</body>
</html>
